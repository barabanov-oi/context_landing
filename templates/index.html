{% extends 'base.html' %}
{% block title %}–õ–µ–Ω—Ç–∞ –∫–µ–π—Å–æ–≤{% endblock %}

{% block head_extra %}
<style>
  .case-cover {
    width: 100%;
    height: 210px;
    object-fit: cover;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.18);
  }
  .metrics-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: .65rem; }
  .metric-vivid {
    border-radius: 14px;
    padding: .7rem;
    border: 1px solid rgba(255,255,255,.2);
    background: linear-gradient(155deg, rgba(0,212,255,.18), rgba(126,91,255,.2));
  }
  .metric-vivid.alt-2 { background: linear-gradient(155deg, rgba(255,214,107,.2), rgba(255,110,199,.2)); }
  .metric-vivid.alt-3 { background: linear-gradient(155deg, rgba(61,255,224,.2), rgba(124,185,255,.2)); }
  .metric-icon { font-size: 1.15rem; }
  .metric-bar { height: 6px; border-radius: 999px; background: rgba(255,255,255,.18); overflow: hidden; }
  .metric-bar > span { display: block; height: 100%; width: 72%; background: linear-gradient(90deg, #00d4ff, #7e5bff); }
  @media (max-width: 767px) { .metrics-grid { grid-template-columns: 1fr; } }
</style>
{% endblock %}

{% block content %}
<section class="mb-4">
  <h1 class="display-6 fw-bold">–ö–µ–π—Å—ã –ø–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –ª–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h1>
  <p class="text-muted-1">–ö–∞—Ä—Ç–æ—á–∫–∏ –≤ –ª–µ–Ω—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–±–ª–æ–∂–∫—É –∏ –Ω–∞–≥–ª—è–¥–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–µ–π—Å–∞.</p>
</section>

<div class="row g-4">
  {% for case in cases %}
    <div class="col-lg-6">
      <article class="card-glass p-4 h-100">
        <img
          class="case-cover mb-3"
          src="{{ url_for('static', filename=case.cover_image if case.cover_image else 'images/case-placeholder.svg') }}"
          alt="–û–±–ª–æ–∂–∫–∞ –∫–µ–π—Å–∞ {{ case.title }}"
        >

        <h2 class="h4 fw-bold mb-1">{{ case.title }}</h2>
        <p class="text-muted-1 mb-2">{{ case.subtitle }} {% if case.duration %}‚Ä¢ {{ case.duration }}{% endif %}</p>
        <div class="mb-2">
          {% for tag in case.tags %}<span class="pill">{{ tag }}</span>{% endfor %}
        </div>
        <p class="text-muted-1">{{ case.teaser }}</p>

        {% set metrics = [
          {'label': case.metric_1_label, 'value': case.metric_1, 'icon': 'üç©'},
          {'label': case.metric_2_label, 'value': case.metric_2, 'icon': 'üìä'},
          {'label': case.metric_3_label, 'value': case.metric_3, 'icon': 'üìà'}
        ] %}
        <div class="metrics-grid mb-3">
          {% for metric in metrics if metric.value %}
            <div class="metric-vivid alt-{{ loop.index }}">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="metric-icon">{{ metric.icon }}</span>
                <small class="text-white-50">{{ metric.label if metric.label else '–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å ' ~ loop.index }}</small>
              </div>
              <div class="fw-semibold small mb-2">{{ metric.value }}</div>
              <div class="metric-bar"><span style="width: {{ 58 + loop.index * 12 }}%"></span></div>
            </div>
          {% endfor %}
        </div>

        <a class="btn btn-outline-light" href="{{ url_for('case_detail', slug=case.slug) }}">–ß–∏—Ç–∞—Ç—å –∫–µ–π—Å</a>
      </article>
    </div>
  {% endfor %}
</div>
{% endblock %}
